# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Repository Overview

This is an AI agent definitions and research documentation repository for the Kiogreo ecosystem. It is a **documentation-only repository** with no traditional source code - its purpose is to store AI agent prompts, research outputs, and consolidated knowledge bases.

**Key Directories:**
- `.opencode/agent/` - OpenCode agent definitions (Markdown with YAML frontmatter) - ready for agent definitions
- `.opencode/command/` - OpenCode custom commands (Markdown with YAML frontmatter)
- `.claude/agents/` - Claude Code agent definitions (see `ai-engineer.md` and `opencode-assistant.tmp.md` as examples)
- `.output/` - Temporary directory for AI agent outputs (used as medium for multi-agent workflows)
- `.lab/` - Semi-temporary directory for research work-in-progress
- `.library/` - Final curated research documentation and knowledge bases

**Key Files:**
- `AGENTS.md` - Quick reference generated by OpenCode `/init` command with agent guidelines and build commands
- `CLAUDE.md` - This file (comprehensive guidance for Claude Code with detailed architecture and patterns)

**Note:** Both `AGENTS.md` and `CLAUDE.md` serve similar purposes but for different tools:
- `AGENTS.md` is concise, focused on quick reference for OpenCode
- `CLAUDE.md` is comprehensive, detailed for Claude Code long-term context

## Development Commands

**Installation:**
```bash
cd .opencode && bun install
```

This installs `@opencode-ai/plugin` dependency used for OpenCode agent development.

**Note:** This repository has no build, lint, or test commands since it's documentation-only. Validation happens through:
1. Manual review of agent definitions
2. Testing agents in real usage scenarios (OpenCode, Claude Code)
3. Verifying agent outputs in target environments

**Common OpenCode Commands:**
- `opencode` - Start OpenCode in current directory
- `/init` - Generate/update AGENTS.md with project analysis
- `/connect` - Configure LLM provider (OpenCode Zen recommended for beginners)

## Agent Definition Architecture

### OpenCode Agents (`.opencode/agent/*.md`)

OpenCode agents use Markdown files with YAML frontmatter. Directory is ready for agent definitions following the structure below.

**Required YAML frontmatter:**
- `name` - Human-readable agent name
- `description` - Clear description of agent purpose and capabilities
- `model` - Always use `anthropic/claude-sonnet-4-5`

**Optional YAML frontmatter:**
- `identifier` - Unique identifier for programmatic access
- `mode: subagent` - Marks agent as a subagent
- `tools` - Object specifying which tools agent can use (e.g., `write: true`)
- `permission` - Object with granular permissions (`write: allow/ask/deny`, `edit: allow/ask/deny`, `webfetch: allow/ask/deny`)

**Standard content structure:**
```markdown
# Agent Name

## Core Responsibilities
[Clear statement of agent's purpose and key objectives]

## Strategy
[High-level approach the agent should follow]

## Input Format
[Expected input types and formats]

## Output Format
[Expected output structure and location]

## Guidelines
[Specific rules and best practices]

## Examples
[Usage examples wrapped in <example> tags]
```

**File naming:** Use kebab-case (e.g., `readme-writer.md`, `analyze-web-docs.md`)

### Claude Code Agents (`.claude/agents/*.md`)

Claude Code agents follow a similar Markdown + YAML structure. See existing examples:
- `ai-engineer.md` - AI/ML implementation specialist agent
- `opencode-assistant.tmp.md` - OpenCode usage expert (comprehensive example with 200+ lines)
- `joker.md` - Humor specialist agent

**YAML frontmatter:**
- `name` - Agent identifier (kebab-case)
- `description` - Purpose and when to use the agent (should mention "Use PROACTIVELY" if applicable)
- `category` - Optional grouping (e.g., `language-specialists`)
- `color` - Optional UI color (e.g., `cyan`)
- `tools` - Optional tool list (e.g., `Write, Read, MultiEdit, Bash, WebFetch`)

**Content sections:**
1. Opening statement of expertise
2. "When invoked" or "Core Responsibilities" section with numbered objectives
3. "Process" or "Strategy" section with bullet-point guidelines
4. "Provide" or deliverables section listing outputs

## Research Output Format

When AI agents generate research documentation, they should use the `lab/.output/` directory with this naming convention:
- `{context}-doc.process.md` - For processed documentation outputs
- Include YAML frontmatter with metadata (title, source, processed_date, tags)
- Structure content for RAG optimization with clear heading hierarchy
- Use `[[Section Name]]` format for cross-references

## Pull Request Guidelines

Use the PR template at `.github/pull_request_template.md`.

**For Agent PRs, complete the checklist:**
- YAML frontmatter complete with all required fields
- Usage examples included in description or content
- Clear objectives defined
- Quality assurance section included (if applicable)

**Review Priorities:**
1. Readability - Is the agent prompt clear and unambiguous?
2. Maintainability - Does it follow existing patterns?
3. Performance - Is the model selection appropriate?

## Workflow Patterns

### Multi-Agent Workflows

The `lab/.output/` directory serves as a communication medium between agents:
1. Agent A processes input → writes to `lab/.output/{context}-doc.process.md`
2. Agent B reads from `lab/.output/` → performs additional processing
3. Final curated output moves to `library/`

### Knowledge Base Curation

1. Raw research/outputs → `lab/.output/` (temporary)
2. Work in progress → `lab/` (semi-temporary)
3. Verified knowledge → `library/` (permanent)

## Code Style Guidelines

While this is primarily a documentation repository, future TypeScript/JavaScript development should follow these conventions:

**File naming:** kebab-case for files and directories
**Variable naming:** camelCase for variables/functions, PascalCase for classes/types
**Imports:** Group in order - stdlib → third-party → local (alphabetically within groups)
**Types:** Use explicit TypeScript types, avoid `any`
**Error handling:** Provide specific, actionable error messages with context
**Comments:** Explain "why" not "what"

## Agent Design Principles

When creating new agents:

1. **Single Responsibility** - Each agent should have one clear purpose
2. **Clear Boundaries** - Define inputs, outputs, and limitations explicitly
3. **Metadata-Rich** - Include comprehensive YAML frontmatter
4. **Example-Driven** - Provide concrete usage examples
5. **RAG-Optimized** - Structure outputs for optimal retrieval in RAG systems
6. **Self-Contained** - Agents should be usable with minimal external context

## Common Agent Types

- **Documentation Processors** - Transform raw docs into structured knowledge bases
- **Code Analyzers** - Extract patterns and insights from codebases
- **Research Synthesizers** - Consolidate information from multiple sources
- **Workflow Orchestrators** - Coordinate multi-step agent workflows
